---
elastic_reinstall: false
kibana_reinstall: false
elastic_clean_data_volume: false
elastic_first_install: false
kibana_on_master: false

# default [] -> "cdfhilmrstw" role
node_roles: []

elasticsearch_image: docker.elastic.co/elasticsearch/elasticsearch:8.4.2
kibana_image: docker.elastic.co/kibana/kibana:8.4.2
elasticsearch_exporter_image: quay.io/prometheuscommunity/elasticsearch-exporter:v1.5.0

stack_data_dir: /var/lib/stack-data

# container logging options
log_driver: json-file
log_options:
  max-size: "10m"
  max-file: "3"
  labels: "org.ska.app.group"
  # env: "some_var"

# labelling on container runtime
container_labels:
  org.ska.app.group: monitoring

eexporter_name: elasticsearch_exporter

elasticsearch_memory: 16G
java_mem: 8g

network_mode: "bridge"

# determine whether this is single_node or multi_node=""
discovery_type: "{% if (groups[target_hosts] | length) > 1 %}multi-node{% else %}single-node{% endif %}"

#### Elastic Cluster Defaults
node_vars:
  # https://discuss.elastic.co/t/elasticsearch-6-8-in-docker-crashing-with-sigill-after-restart-corrupt-state/200452
  ES_JAVA_OPTS: "-server -Xms{{ java_mem }} -Xmx{{ java_mem }} -Dlog4j2.formatMsgNoLookups=true"
  ES_HEAP_SIZE: 8g
  MAX_OPEN_FILES: "131070"