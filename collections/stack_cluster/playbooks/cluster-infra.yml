---
# This playbook uses the Ansible OpenStack modules to create a cluster
# using a number of baremetal compute node instances, and configure it
# for a SLURM partition
- hosts: openstack

  roles:
    - role: ska_cicd.stack_cluster.stackcluster
      cluster_name: "{{ cluster_name }}"
      cluster_params:
        cluster_prefix: "{{ cluster_name }}"
        cluster_keypair: "{{ cluster_keypair }}"
        cluster_az: "{{ cluster_az }}"
        cluster_groups: "{{ cluster_groups }}"
        cluster_net: "{{ cluster_net }}"
        docker_vol_size: "{{ docker_vol_size }}"
        data_vol_size: "{{ data_vol_size }}"
        data_vol_snapshot: "{{ data_vol_snapshot }}"
        data_vol_name: "{{ data_vol_name }}"
        create_data_vol: "{{ create_data_vol }}"
        data2_vol_size: "{{ data2_vol_size }}"
        data2_vol_name: "{{ data2_vol_name }}"
        create_data2_vol: "{{ create_data2_vol }}"
        secondary_net: "{{ secondary_net }}"
      cluster_roles: "{{ cluster_roles }}"
