apiVersion: controlplane.cluster.x-k8s.io/v1beta1
kind: KubeadmControlPlane
metadata:
  name: ${CLUSTER_NAME}-control-plane
spec:
  kubeadmConfigSpec:
    verbosity: 5
    preKubeadmCommands:
      - 'echo "preKubeadmCommands: start $(date)" >>/tmp/capo-config.log'
    postKubeadmCommands:
      - 'echo "postKubeadmCommands: start $(date)" >>/tmp/capo-config.log'
    clusterConfiguration:
      imageRepository: k8s.gcr.io
      dns:
        imageRepository: docker.io/coredns
        imageTag: "1.9.3"
