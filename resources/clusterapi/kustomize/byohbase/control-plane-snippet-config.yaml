apiVersion: controlplane.cluster.x-k8s.io/v1beta1
kind: KubeadmControlPlane
metadata:
  name: ${CLUSTER_NAME}-control-plane
spec:
  kubeadmConfigSpec:
    verbosity: 5
    preKubeadmCommands:
      - 'echo "preKubeadmCommands: start $(date)" >>/tmp/capo-config.log'
    postKubeadmCommands:
      - 'echo "postKubeadmCommands: start $(date)" >>/tmp/capo-config.log'
    clusterConfiguration:
      imageRepository: k8s.gcr.io
      dns:
        imageRepository: docker.io/coredns
        imageTag: "1.9.3"
      apiServer:
        certSANs:
        - localhost
        - 127.0.0.1
        - 0.0.0.0
        - host.docker.internal
        - za-itf-k8s.skao.int
        - za-itf-k8s-master01.za-itf.skao.int
        - za-itf-k8s-master02.za-itf.skao.int
        - za-itf-k8s-master03.za-itf.skao.int
